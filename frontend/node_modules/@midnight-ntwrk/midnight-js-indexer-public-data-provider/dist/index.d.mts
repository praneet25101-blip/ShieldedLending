import { GraphQLFormattedError } from 'graphql';
import { UnshieldedUtxos, UnshieldedBalances, PublicDataProvider } from '@midnight-ntwrk/midnight-js-types';
import * as ws from 'isomorphic-ws';

/**
 * An error describing the causes of error that occurred during server-side execution of
 * a query against the Indexer.
 */
declare class IndexerFormattedError extends Error {
    readonly cause: readonly GraphQLFormattedError[];
    /**
     * @param cause An array of GraphQL errors that occurred during the server-side execution.
     */
    constructor(cause: readonly GraphQLFormattedError[]);
}

/** All built-in and custom scalars, mapped to their actual values */
type Scalars = {
    ID: {
        input: string;
        output: string;
    };
    String: {
        input: string;
        output: string;
    };
    Boolean: {
        input: boolean;
        output: boolean;
    };
    Int: {
        input: number;
        output: number;
    };
    Float: {
        input: number;
        output: number;
    };
    CardanoRewardAddress: {
        input: string;
        output: string;
    };
    DustAddress: {
        input: string;
        output: string;
    };
    HexEncoded: {
        input: string;
        output: string;
    };
    Unit: {
        input: null;
        output: null;
    };
    UnshieldedAddress: {
        input: string;
        output: string;
    };
    ViewingKey: {
        input: string;
        output: string;
    };
};
/**
 * Represents a token balance held by a contract.
 * This type is exposed through the GraphQL API to allow clients to query
 * unshielded token balances for any contract action (Deploy, Call, Update).
 */
type ContractBalance = {
    /** Balance amount as string to support larger integer values (up to 16 bytes). */
    readonly amount: Scalars['String']['output'];
    /** Hex-encoded token type identifier. */
    readonly tokenType: Scalars['HexEncoded']['output'];
};

type IndexerUtxo = {
    owner: string;
    intentHash: string;
    tokenType: string;
    value: string;
};
declare const toUnshieldedUtxos: (createdUtxo: readonly IndexerUtxo[], spentUtxo: readonly IndexerUtxo[]) => UnshieldedUtxos;
declare const toUnshieldedBalances: (contractBalances: readonly ContractBalance[]) => UnshieldedBalances;
/**
 * Constructs a {@link PublicDataProvider} based on an {@link ApolloClient}.
 *
 * @param queryURL The URL of a GraphQL server query endpoint.
 * @param subscriptionURL The URL of a GraphQL server subscription (websocket) endpoint.
 * @param webSocketImpl An optional websocket implementation for the Apollo client to use.
 *
 * TODO: Re-examine caching when 'ContractCall' and 'ContractDeploy' have transaction identifiers included.
 */
declare const indexerPublicDataProvider: (queryURL: string, subscriptionURL: string, webSocketImpl?: typeof ws.WebSocket) => PublicDataProvider;

export { IndexerFormattedError, indexerPublicDataProvider, toUnshieldedBalances, toUnshieldedUtxos };
export type { IndexerUtxo };
